<nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom sticky-top">
  <div class="container-fluid">
    <!-- Logo and Brand -->
    <a class="navbar-brand text-danger" href="/listings">
      <i class="fas fa-hotel me-2"></i>
      JourneyStay
    </a>

    <!-- Mobile Search Toggle -->
    <button class="btn btn-sm btn-outline-secondary d-lg-none me-2" type="button" data-bs-toggle="collapse" data-bs-target="#searchCollapse" aria-expanded="false" aria-controls="searchCollapse">
      <i class="fas fa-search"></i>
    </button>

    <!-- Notifications for Mobile -->
    <div class="d-flex d-lg-none">
      <a href="#" class="btn btn-sm btn-outline-secondary me-2">
        <i class="fas fa-heart"></i>
      </a>
      <a href="#" class="btn btn-sm btn-outline-secondary me-2">
        <i class="fas fa-envelope"></i>
      </a>
    </div>

    <!-- Toggle Button -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
      aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Collapsible Content -->
    <div class="collapse navbar-collapse" id="navbarContent">
      <!-- Primary Nav Items -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/">
            <i class="fas fa-home me-1"></i>Home
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/listings">
            <i class="fas fa-list me-1"></i>All Listings
          </a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="exploreDropdown" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            <i class="fas fa-compass me-1"></i>Explore
          </a>
          <ul class="dropdown-menu" aria-labelledby="exploreDropdown">
            <li><a class="dropdown-item" href="/pop-dest">
              <i class="fas fa-map-marker-alt me-2"></i>Popular Destinations
            </a></li>
            <li><a class="dropdown-item" href="/uni-dest">
              <i class="fas fa-star me-2"></i>Unique Experiences
            </a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="/special-deals">
              <i class="fas fa-tag me-2"></i>Special Deals
            </a></li>
          </ul>
        </li>
      </ul>

      <!-- Desktop Search (Hidden on mobile) -->
      <div class="search-container mx-auto d-none d-lg-block" style="max-width: 400px;">
        <form class="d-flex search-form position-relative" action="#" method="GET">
          <div class="input-group rounded-pill shadow-sm">
            <input 
              class="form-control rounded-pill border-0 px-4 py-2" 
              type="search" 
              name="query"
              placeholder="Where are you going?" 
              aria-label="Search"
            >
            <button 
              class="btn btn-danger rounded-circle search-btn position-absolute end-0 top-50 translate-middle-y me-2" 
              type="submit"
            >
              <i class="fas fa-search"></i>
            </button>
          </div>
        </form>
      </div>

      <!-- Right Side Menu - Desktop -->
      <ul class="navbar-nav ms-auto align-items-center d-none d-lg-flex">
        <% if (currentUser) { %>
          <li class="nav-item me-2">
            <a class="nav-link" href="#" title="Favorites">
              <i class="fas fa-heart"></i>
            </a>
          </li>
          <li class="nav-item me-2">
            <a class="nav-link" href="#" title="Messages">
              <i class="fas fa-envelope"></i>
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown"
              aria-expanded="false">
              <i class="fas fa-user-circle"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
              <li><a class="dropdown-item" href="/profile">
                <i class="fas fa-user me-2"></i>Profile
              </a></li>
              <li><a class="dropdown-item" href="/my-bookings">
                <i class="fas fa-calendar-alt me-2"></i>My Bookings
              </a></li>
              <li><a class="dropdown-item" href="/settings">
                <i class="fas fa-cog me-2"></i>Settings
              </a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="/logout">
                <i class="fas fa-sign-out-alt me-2"></i>Logout
              </a></li>
            </ul>
          </li>
        <% } else { %>
          <li class="nav-item me-2">
            <a class="btn btn-outline-danger" href="/login">Login</a>
          </li>
          <li class="nav-item">
            <a class="btn btn-danger" href="/signup">Sign Up</a>
          </li>
        <% } %>
      </ul>

      <!-- User Menu - Mobile Only -->
      <div class="d-lg-none mt-3 border-top pt-3">
        <% if (currentUser) { %>
          <div class="d-flex align-items-center mb-3">
            <i class="fas fa-user-circle fs-4 me-2"></i>
            <span class="fw-bold">Your Account</span>
          </div>
          <a class="d-block py-2 text-decoration-none text-dark" href="/profile">
            <i class="fas fa-user me-2"></i>Profile
          </a>
          <a class="d-block py-2 text-decoration-none text-dark" href="/my-bookings">
            <i class="fas fa-calendar-alt me-2"></i>My Bookings
          </a>
          <a class="d-block py-2 text-decoration-none text-dark" href="/settings">
            <i class="fas fa-cog me-2"></i>Settings
          </a>
          <a class="d-block py-2 text-decoration-none text-dark" href="/logout">
            <i class="fas fa-sign-out-alt me-2"></i>Logout
          </a>
        <% } else { %>
          <div class="d-grid gap-2">
            <a class="btn btn-outline-danger mb-2" href="/login">
              <i class="fas fa-sign-in-alt me-2"></i>Login
            </a>
            <a class="btn btn-danger" href="/signup">
              <i class="fas fa-user-plus me-2"></i>Sign Up
            </a>
          </div>
        <% } %>
      </div>
    </div>
  </div>
</nav>

<!-- Mobile Search Collapse (Separate from main navbar) -->
<div class="collapse bg-light p-2 border-bottom" id="searchCollapse">
  <form class="d-flex search-form" action="#" method="GET">
    <div class="input-group">
      <input 
        class="form-control" 
        type="search" 
        name="query"
        placeholder="Where are you going?" 
        aria-label="Search"
      >
      <button class="btn btn-danger" type="submit">
        <i class="fas fa-search"></i>
      </button>
    </div>
  </form>
</div>